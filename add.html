<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>

    <label>Ø§Ù„Ù…Ù‡Ù…Ø©:</label>
    <input type="text" id="taskText" placeholder="Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ù…Ù‡Ù…Ø©" required>

    <label>Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª:</label>
    <input type="datetime-local" id="taskTime" required>

    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ù‡Ù…Ø©:</label>
    <select id="taskType">
      <option value="ÙˆØ§Ø¬Ø¨">ğŸ“˜ ÙˆØ§Ø¬Ø¨</option>
      <option value="Ù…Ø´Ø±ÙˆØ¹">ğŸ› ï¸ Ù…Ø´Ø±ÙˆØ¹</option>
      <option value="Ù…Ø­Ø§Ø¶Ø±Ø©">ğŸ• Ù…ÙŠØ¹Ø§Ø¯ Ù…Ø­Ø§Ø¶Ø±Ø©</option>
      <option value="Ø¥Ø´Ø¹Ø§Ø±">ğŸ“¢ Ø¥Ø´Ø¹Ø§Ø± Ù…Ù‡Ù…</option>
      <option value="Ø§Ø®ØªØ¨Ø§Ø±">âœï¸ Ø§Ø®ØªØ¨Ø§Ø±</option>
    </select>

    <label>Ø§Ù„ÙØ¦Ø©:</label>
    <select id="taskCategory">
      <option value="Ø§Ù„Ø¹Ù…Ù„">ğŸ“ Ø§Ù„Ø¹Ù…Ù„</option>
      <option value="Ø§Ù„Ù…Ù†Ø²Ù„">ğŸ  Ø§Ù„Ù…Ù†Ø²Ù„</option>
      <option value="Ø§Ù„Ø¯Ø±Ø§Ø³Ø©">ğŸ“š Ø§Ù„Ø¯Ø±Ø§Ø³Ø©</option>
      <option value="Ø§Ù„ØªØ³ÙˆÙ‚">ğŸ›’ Ø§Ù„ØªØ³ÙˆÙ‚</option>
    </select>

    <button onclick="addTask()">ğŸ“¥ Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
    <button onclick="location.href='index.html'">â†©ï¸ Ø±Ø¬ÙˆØ¹</button>

    <p id="timeResult" style="color: #333; font-weight: bold;"></p>
    <button id="timeRemainingBtn" onclick="showTimeRemaining()" style="margin-top: 10px;">âŒ›ï¸ Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</button>
    <p id="timeRemaining" style="color: #333; font-weight: bold;"></p>
  </div>

  <script>
    // Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
    document.getElementById("taskTime").addEventListener("input", function () {
      const timeInput = this.value;
      if (!timeInput) return;

      const date = new Date(timeInput);
      const options = {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: 'numeric',
        minute: '2-digit',
        hour12: true
      };
      const formatted = date.toLocaleString('ar-EG', options);
      document.getElementById("timeResult").textContent = `ğŸ“… Ø§Ù„Ù…Ù‡Ù…Ø© Ø³ØªÙƒÙˆÙ† ÙÙŠ: ${formatted}`;
    });

    // Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
    function addTask() {
      const text = document.getElementById("taskText").value;
      const time = document.getElementById("taskTime").value;
      const type = document.getElementById("taskType").value;
      const category = document.getElementById("taskCategory").value;

      if (!text || !time) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

      const task = { text, time, type };
      const tasks = JSON.parse(localStorage.getItem(category)) || [];
      tasks.push(task);
      localStorage.setItem(category, JSON.stringify(tasks));

      alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­");
      location.href = "list.html";
    }

    // Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
    function showTimeRemaining() {
      const timeInput = document.getElementById("taskTime").value;
      if (!timeInput) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹.");

      const taskTime = new Date(timeInput);
      const now = new Date();
      const timeDiff = taskTime - now;

      if (timeDiff <= 0) {
        document.getElementById("timeRemaining").textContent = "âŒ Ø§Ù„Ù…Ù‡Ù…Ø© Ù‚Ø¯ Ù…Ø¶Øª Ø¨Ø§Ù„ÙØ¹Ù„.";
      } else {
        const hours = Math.floor(timeDiff / 1000 / 60 / 60);
        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000 / 60);
        document.getElementById("timeRemaining").textContent = `â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${hours} Ø³Ø§Ø¹Ø© Ùˆ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
      }
    }
  </script>
</body>
</html>
